{% if pages.current == 'catalog' %} 

    {% if products|length > 0 %}
        <div class="showcase-catalog clearfix col-sm-12 col-md-12">
            <ul class="row">
            {% for product in products %}
                {% set ranking = product.ranking %}
                <li class="col-xs-6 col-sm-4">
                    {% element 'snippets/product' {"product": product} %}
                </li>
                
                {% if utils.is_mobile %}
                    {% if loop.index is divisible by(4) %}
                    </ul><ul class="row">
                    {% endif %}
                {% else %}
                    {% if loop.index is divisible by(3) %}
                    </ul><ul class="row">
                    {% endif %}
                {% endif %}
            {% endfor %}
            </ul>
        </div>
    {% endif %}

{% else %}

    {% if products|length > 0 %}
        <div class="showcase-catalog clearfix col-sm-12 col-md-12">
            <ul class="row">
            {% for product in products %}
                {% set ranking = product.ranking %}
                <li class="col-xs-6 col-sm-3">
                    {% element 'snippets/product' {"product": product} %}
                </li>
                
                {% if loop.index is divisible by(4) %}
                </ul><ul class="row">
                {% endif %}
            {% endfor %}
            </ul>
        </div>
    {% endif %}

{% endif %}